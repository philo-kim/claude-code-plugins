# Project Health Configuration
# Generated by /health init
# Customize thresholds and policies for your project

# ============================================================================
# PROJECT INFORMATION
# ============================================================================

project: my-project
language: auto-detect    # typescript | python | java | kotlin | swift | go | ruby
framework: auto-detect   # express | nestjs | django | spring | ktor | rails | nextjs

# ============================================================================
# SECURITY POLICY
# ============================================================================

security:
  # What to check
  check_auth: true
  check_secrets: true
  check_input_validation: true

  # Paths containing sensitive logic (weighted higher in scoring)
  sensitive_paths:
    - "**/auth/**"
    - "**/payment/**"
    - "**/admin/**"
    - "**/user/**"

  # Endpoints intentionally public (won't flag as missing auth)
  allowed_public_endpoints: []
  # - "GET /health"
  # - "GET /api/docs"
  # - "POST /api/auth/login"

# ============================================================================
# TECHNICAL DEBT THRESHOLDS
# ============================================================================

debt:
  # Complexity limits
  max_cyclomatic_complexity: 20
  max_function_lines: 50
  max_file_lines: 500
  max_nesting_depth: 4

  # TODO/FIXME tracking
  todo_warning_days: 30     # Warn if TODO is older than this
  todo_critical_days: 90    # Critical if TODO is older than this

  # Test coverage expectations
  min_test_coverage: 60     # percentage

# ============================================================================
# DEPENDENCY POLICY
# ============================================================================

dependencies:
  # Allowed open source licenses
  allowed_licenses:
    - MIT
    - Apache-2.0
    - BSD-2-Clause
    - BSD-3-Clause
    - ISC

  # Package freshness
  max_package_age_months: 18    # Warn if not updated in this period

  # Bundle size
  max_bundle_size_kb: 300

  # Duplicate detection
  check_duplicates: true        # Flag packages with overlapping purpose

# ============================================================================
# PERFORMANCE BUDGET
# ============================================================================

performance:
  # Bundle budget
  bundle_budget_kb: 300

  # Pattern detection
  check_n_plus_one: true       # Detect N+1 query patterns
  check_rerender: true         # Detect unnecessary re-renders (React/Vue)
  check_memory_leaks: true     # Detect event listener / subscription leaks

# ============================================================================
# SCORING
# ============================================================================

scoring:
  # Category weights (must sum to 100)
  weights:
    security: 30
    debt: 30
    dependencies: 20
    performance: 20

  # Alert thresholds
  alerts:
    critical_threshold: 60      # Alert if overall score drops below
    degradation_threshold: 10   # Alert if score drops by this much

# ============================================================================
# IGNORE PATHS
# ============================================================================

ignore:
  - "**/node_modules/**"
  - "**/dist/**"
  - "**/build/**"
  - "**/.git/**"
  - "**/test/**"
  - "**/tests/**"
  - "**/__tests__/**"
  - "**/spec/**"
  - "**/coverage/**"
  - "**/vendor/**"
  - "**/*.min.js"
  - "**/*.bundle.js"

# ============================================================================
# REPORTING
# ============================================================================

reports:
  output_dir: shared/health-reports
  keep_history: 30    # days
  format: markdown    # markdown | json

# ============================================================================
# METADATA
# ============================================================================

metadata:
  created_at: null          # Set by /health init
  last_scan: null
  last_score: null
